{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/gabriel/Documentos/1click/Mobil/src/components/Icons/PanicIcon.js\";\nimport React, { useState, useEffect } from 'react';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/native';\nimport * as Location from 'expo-location';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { clientesActions } from \"../../actions\";\n\nfunction PanicIcon() {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      location = _useState2[0],\n      setLocation = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errorMsg = _useState4[0],\n      setErrorMsg = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      latitude = _useState6[0],\n      setLatitude = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      longitude = _useState8[0],\n      setLongitude = _useState8[1];\n\n  var navigation = useNavigation();\n  var dispatch = useDispatch();\n  var usuario = useSelector(function (state) {\n    return state.clientes.user;\n  });\n\n  var _retrieveData = function _retrieveData(key) {\n    var data;\n    return _regeneratorRuntime.async(function _retrieveData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(key));\n\n          case 3:\n            data = _context.sent;\n            return _context.abrupt(\"return\", data);\n\n          case 7:\n            _context.prev = 7;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  useEffect(function () {\n    (function _callee() {\n      var _await$Location$reque, status, location;\n\n      return _regeneratorRuntime.async(function _callee$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n            case 2:\n              _await$Location$reque = _context2.sent;\n              status = _await$Location$reque.status;\n\n              if (status !== 'granted') {\n                setErrorMsg('Permission to access location was denied');\n              }\n\n              _context2.next = 7;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({}));\n\n            case 7:\n              location = _context2.sent;\n              setLocation(location);\n              setLatitude(location.coords.latitude);\n              setLongitude(location.coords.longitude);\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    });\n\n    return function () {\n      dispatch(clientesActions.resetL('RESET_USUARIO'));\n    };\n  }, []);\n  var text = 'Waiting..';\n\n  if (errorMsg) {\n    text = errorMsg;\n  } else if (location) {\n    text = JSON.stringify(location.coords);\n  }\n\n  function getAlerta() {\n    _retrieveData('userId').then(function (userId) {\n      if (userId !== '0') {\n        dispatch(clientesActions.getUsuario(userId));\n        var usr = usuario;\n        usr.latitude = latitude, usr.longitude = longitude;\n        dispatch(clientesActions.sendPanico(usr));\n      } else {\n        navigation.navigate('Login');\n      }\n    });\n  }\n\n  return React.createElement(View, {\n    style: styles.container\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return getAlerta();\n    },\n    style: styles.imgSearch\n  }, React.createElement(Ionicons, {\n    name: \"ios-alert\",\n    size: 30,\n    color: \"#eaeaea\"\n  })));\n}\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    flexDirection: 'row'\n  },\n  imgSearch: {\n    borderColor: '#c1c1c1',\n    borderWidth: 1,\n    borderRadius: 25,\n    paddingTop: 8,\n    paddingLeft: 8,\n    height: 50,\n    width: 50,\n    backgroundColor: '#e15350'\n  }\n});\nexport default PanicIcon;","map":{"version":3,"sources":["/home/gabriel/Documentos/1click/Mobil/src/components/Icons/PanicIcon.js"],"names":["React","useState","useEffect","AsyncStorage","Ionicons","useNavigation","Location","useSelector","useDispatch","clientesActions","PanicIcon","location","setLocation","errorMsg","setErrorMsg","latitude","setLatitude","longitude","setLongitude","navigation","dispatch","usuario","state","clientes","user","_retrieveData","key","getItem","data","console","log","requestPermissionsAsync","status","getCurrentPositionAsync","coords","resetL","text","JSON","stringify","getAlerta","then","userId","getUsuario","usr","sendPanico","navigate","styles","container","imgSearch","StyleSheet","create","flex","flexDirection","borderColor","borderWidth","borderRadius","paddingTop","paddingLeft","height","width","backgroundColor"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { TouchableOpacity, StyleSheet, View } from 'react-native'\nimport AsyncStorage from '@react-native-async-storage/async-storage'\nimport { Ionicons } from '@expo/vector-icons'\nimport { useNavigation } from '@react-navigation/native'\nimport * as Location from 'expo-location';\n\nimport { useSelector, useDispatch } from 'react-redux'\nimport {clientesActions} from '../../actions'\n\n\n\n\n\nfunction PanicIcon(){  \n    \n    const [location, setLocation] = useState(null);\n    const [errorMsg, setErrorMsg] = useState(null);\n    const [latitude, setLatitude ] = useState(null);\n    const [longitude, setLongitude ] = useState(null);\n    const navigation = useNavigation() \n    const dispatch = useDispatch()\n    const usuario = useSelector(state => state.clientes.user)\n\n    const _retrieveData = async (key) => {\n      try {\n        const data = await AsyncStorage.getItem(key);\n        return data;\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    \n    useEffect(() =>{    \n      (async () => {\n        let { status } = await Location.requestPermissionsAsync();\n        if (status !== 'granted') {\n          setErrorMsg('Permission to access location was denied');\n        }\n  \n        let location = await Location.getCurrentPositionAsync({});      \n          setLocation(location);          \n          setLatitude(location.coords.latitude)\n          setLongitude(location.coords.longitude)      \n        });\n\n        \n  \n      return () =>{        \n        dispatch(clientesActions.resetL('RESET_USUARIO'))        \n      };      \n  \n    }, []);\n  \n    let text = 'Waiting..';  \n    if (errorMsg) {\n      text = errorMsg;\n    } else if (location) {\n      text = JSON.stringify(location.coords);        \n    }\n\n    function getAlerta () {            \n      _retrieveData('userId').then((userId)=>{      \n        if(userId !== '0'){          \n          dispatch(clientesActions.getUsuario(userId))          \n          let usr = usuario          \n          usr.latitude = latitude,\n          usr.longitude = longitude\n          dispatch(clientesActions.sendPanico(usr)) \n        }else{        \n          navigation.navigate('Login');\n        }      \n      });\n      }\n  \n  return(\n        <View style={styles.container}>                        \n        <TouchableOpacity onPress={() => getAlerta() } style={styles.imgSearch}>\n            <Ionicons name=\"ios-alert\" size={30} color=\"#eaeaea\" />\n        </TouchableOpacity>\n        </View>\n    )\n}\n\nconst styles = StyleSheet.create({\n    container:{\n      flex:1,\n      flexDirection:'row',      \n      \n    },\n    imgSearch: {\n        borderColor:'#c1c1c1',\n        borderWidth:1,\n        borderRadius:25,\n        paddingTop:8,\n        paddingLeft:8,\n        height: 50,\n        width: 50,                \n        backgroundColor:'#e15350'\n      },        \n  });\n\nexport default PanicIcon"]},"metadata":{},"sourceType":"module"}